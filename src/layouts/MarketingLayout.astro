---
import BaseLayout from './BaseLayout.astro';
import Header from '@layout/Header.astro';
import Footer from '@layout/Footer.astro';
import AnnouncementBar from '@layout/AnnouncementBar.astro';
import { siteConfig } from '@/config';

interface Props {
  title: string;
  seoTitle?: string;
  description: string;
  image?: string;
  type?: 'website' | 'article';
  // Article-specific props for JSON-LD
  publishedDate?: Date;
  modifiedDate?: Date;
  author?: string;
  tags?: string[];
  noindex?: boolean;
  faq?: { question: string; answer: string }[];
  howTo?: { name: string; steps: { name: string; text: string }[] };
  softwareApp?: Record<string, unknown> | null;
  person?: Record<string, unknown> | null;
  product?: Record<string, unknown> | null;
}

const {
  title,
  seoTitle,
  description,
  image,
  type = 'website',
  publishedDate,
  modifiedDate,
  author,
  tags,
  noindex,
  faq,
  howTo,
  softwareApp,
  person,
  product,
} = Astro.props;

const { announcement } = siteConfig;
---

<BaseLayout
  title={title}
  seoTitle={seoTitle}
  description={description}
  image={image}
  type={type}
  publishedDate={publishedDate}
  modifiedDate={modifiedDate}
  author={author}
  tags={tags}
  noindex={noindex}
  faq={faq}
  howTo={howTo}
  softwareApp={softwareApp}
  person={person}
  product={product}
>
  <div class="flex flex-col min-h-screen">
    {
      announcement.enabled && (
        <AnnouncementBar
          id={announcement.id}
          text={announcement.text}
          href={announcement.href}
          linkText={announcement.linkText}
          variant={announcement.variant}
          dismissible={announcement.dismissible}
        />
      )
    }
    <Header />
    <main id="main-content" class="flex-1">
      <slot />
    </main>
    <Footer />
  </div>
</BaseLayout>
