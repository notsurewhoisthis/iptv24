---
import MarketingLayout from '@/layouts/MarketingLayout.astro';
import PageHeader from '@sections/content/PageHeader.astro';
import ContactForm from '@forms/ContactForm.astro';
import { Icon } from 'astro-icon/components';
import { siteConfig, contact, contactMethods, contactFAQs, contactForm } from '@/config';

const office = contact.address;
---

<MarketingLayout
  title={`Contact - ${siteConfig.name}`}
  description="Get in touch with the IPTV24 team for editorial updates or technical questions."
>
  <PageHeader
    title="Get in touch"
    subtitle={`Have a question about ${siteConfig.name} testing or an update request? We'd love to hear from you.`}
    align="left"
    maxWidth="lg"
  />

  <section class="py-section bg-surface">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <div>
          <h2 class="text-2xl font-bold text-text mb-8">Send us a message</h2>
          <ContactForm
            action={contactForm.accessKey ? contactForm.action : ''}
            method="POST"
            web3formsKey={contactForm.accessKey}
          />
          <p class="mt-4 text-sm text-text-muted">
            This form uses a free Web3Forms endpoint. Include your device model and app version so
            we can reproduce the issue quickly.
          </p>
        </div>

        <div class="space-y-8">
          <!-- Contact Methods -->
          {
            contactMethods.length > 0 && (
              <div>
                <h2 class="text-2xl font-bold text-text mb-4">Other ways to reach us</h2>
                <div class="space-y-3">
                  {contactMethods.map((method) => (
                    <a
                      href={method.href}
                      class="flex items-center gap-3 text-text-muted hover:text-primary transition-colors group"
                    >
                      <Icon name={method.icon} class="w-5 h-5 text-primary" />
                      <span class="group-hover:underline">{method.value}</span>
                    </a>
                  ))}
                </div>
              </div>
            )
          }

          <!-- Our Office -->
          <div>
            <h2 class="text-2xl font-bold text-text mb-4">Our office</h2>
            <div class="flex items-start gap-3 text-text-muted">
              <Icon name="lucide:map-pin" class="w-5 h-5 text-primary flex-shrink-0 mt-0.5" />
              <address class="not-italic">
                {office.street}<br />
                {office.city}, {office.state}
                {office.zip}<br />
                {office.country}
              </address>
            </div>
          </div>

          <!-- FAQ Mini -->
          <div>
            <h2 class="text-2xl font-bold text-text mb-4">Common questions</h2>
            <div class="space-y-4">
              {
                contactFAQs.map((faq) => (
                  <div>
                    <h3 class="font-medium text-text">{faq.question}</h3>
                    <p class="text-sm text-text-muted mt-1">{faq.answer}</p>
                  </div>
                ))
              }
            </div>
            <a
              href="/guides"
              class="inline-flex items-center gap-1 text-primary hover:underline mt-4 text-sm font-medium"
            >
              Browse setup guides
              <Icon name="lucide:arrow-right" class="w-4 h-4" />
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</MarketingLayout>
